!function(e){e.fn.waitMe=function(t){return this.each((function(){function i(){var e=d.attr("data-waitme_id");d.removeClass("waitMe_container").removeAttr("data-waitme_id"),d.find('.waitMe[data-waitme_id="'+e+'"]').remove()}var o,a,r,s,n,c,d=e(this),l=!1,f="background-color",w="",u="",m={init:function(){function m(e){v.css({top:"auto",transform:"translateY("+e+"px) translateZ(0)"})}switch(n=e.extend({effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",waitTime:-1,textPos:"vertical",fontSize:"",source:"",onClose:function(){}},t),c=(new Date).getMilliseconds(),s=e('<div class="waitMe" data-waitme_id="'+c+'"></div>'),n.effect){case"none":r=0;break;case"bounce":case"facebook":case"bouncePulse":r=3;break;case"rotateplane":case"progressBar":case"img":r=1;break;case"stretch":r=5;break;case"orbit":r=2,l=!0;break;case"roundBounce":case"ios":r=12;break;case"win8":case"win8_linear":r=5,l=!0;break;case"rotation":case"pulse":r=1,f="border-color";break;case"timer":r=2;var h=e.isArray(n.color)?n.color[0]:n.color;w="border-color:"+h}if(""!==w&&(w+=";"),0<r){if("img"===n.effect)u='<img src="'+n.source+'">';else for(var g=1;g<=r;++g)e.isArray(n.color)?null==(h=n.color[g])&&(h="#000"):h=n.color,u=l?u+'<div class="waitMe_progress_elem'+g+'"><div style="'+f+":"+h+'"></div></div>':u+'<div class="waitMe_progress_elem'+g+'" style="'+f+":"+h+'"></div>';a=e('<div class="waitMe_progress '+n.effect+'" style="'+w+'">'+u+"</div>")}n.text&&(h=e.isArray(n.color)?n.color[0]:n.color,o=e('<div class="waitMe_text" style="color:'+h+";"+(""!=n.fontSize?"font-size:"+n.fontSize:"")+'">'+n.text+"</div>"));var p=d.find("> .waitMe");p&&p.remove(),(h=e('<div class="waitMe_content '+n.textPos+'"></div>')).append(a,o),s.append(h),"HTML"==d[0].tagName&&(d=e("body")),d.addClass("waitMe_container").attr("data-waitme_id",c).append(s),p=d.find("> .waitMe");var v=d.find(".waitMe_content");if(p.css({background:n.bg}),""!==n.maxSize&&"none"!=n.effect&&(h=a.outerHeight(),a.outerWidth(),"img"===n.effect?(a.css({height:n.maxSize+"px"}),a.find(">img").css({maxHeight:"100%"}),v.css({marginTop:-v.outerHeight()/2+"px"})):n.maxSize<h&&("stretch"==n.effect?(a.css({height:n.maxSize+"px",width:n.maxSize+"px"}),a.find("> div").css({margin:"0 5%"})):(h=n.maxSize/h-.2,g="-50%","roundBounce"==n.effect?(g="-75%",n.text&&(g="75%")):"win8"==n.effect||"timer"==n.effect||"orbit"==n.effect?(g="-20%",n.text&&(g="20%")):"ios"==n.effect&&(g="-15%",n.text&&(g="15%")),"rotation"==n.effect&&n.text&&(g="75%"),a.css({transform:"scale("+h+") translateX("+g+")",whiteSpace:"nowrap"})))),v.css({marginTop:-v.outerHeight()/2+"px"}),d.outerHeight()>e(window).height()){h=e(window).scrollTop();var b=v.outerHeight(),x=d.offset().top,y=d.outerHeight();0>(g=h-x+e(window).height()/2)&&(g=Math.abs(g)),0<=g-b&&g+b<=y?x-h>e(window).height()/2&&(g=b):g=h>x+y-b?h-x-b:h-x+b,m(g),e(document).scroll((function(){var t=e(window).scrollTop()-x+e(window).height()/2;0<=t-b&&t+b<=y&&m(t)}))}return 0<n.waitTime&&setTimeout((function(){i()}),n.waitTime),p.on("destroyed",(function(){n.onClose&&e.isFunction(n.onClose)&&n.onClose(d),p.trigger("close",{el:d})})),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},p},hide:function(){i()}};return m[t]?m[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:m.init.apply(this,arguments)}))},e(window).on("load",(function(){e("body.waitMe_body").addClass("hideMe"),setTimeout((function(){e("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove(),e("body.waitMe_body").removeClass("waitMe_body hideMe")}),200)}))}(jQuery);